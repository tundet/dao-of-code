<!--
  Generated template for the Upload page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Upload</ion-title>
  </ion-navbar>
  <ion-segment [(ngModel)]="uploadType">
    <ion-segment-button value="image">
      Image
    </ion-segment-button>
    <ion-segment-button value="video">
      Video
    </ion-segment-button>
    <ion-segment-button value="text">
      Text
    </ion-segment-button>
    <ion-segment-button value="youtube">
      Youtube
    </ion-segment-button>
    <ion-segment-button value="audio">
      Audio
    </ion-segment-button>
  </ion-segment>
</ion-header>
<ion-content padding>
  <form>
    <ion-list [ngSwitch]="uploadType">
      <ion-item *ngSwitchCase="'image'">
        <input
          type="file"
          name="imagefile"
          (change)="imageFileChange($event)"
        >
      </ion-item>
      <ion-item *ngSwitchCase="'video'">
        <input
          type="file"
          name="videofile"
          (change)="videoFileChange($event)"
        >
      </ion-item>
      <ion-item *ngSwitchCase="'text'">
        <input
          type="file"
          name="textfile"
          (change)="textFileChange($event)"
        >
      </ion-item>
      <ion-item *ngSwitchCase="'youtube'">
        <ion-label stacked="">Youtube video link</ion-label>
        <ion-input
          type="text"
          name="formyoutubeLink"
          [(ngModel)]="formyoutubeLink"
        ></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'audio'">
        <input
          type="file"
          name="audiofile"
          (change)="audioFileChange($event)"
        >
      </ion-item>
      <ion-item>
        <ion-label stacked>Minimum 4 letters, maximum 50 letters</ion-label>
        <ion-input
          type="text"
          name="formtitle"
          [(ngModel)]="formtitle"
          placeholder="title"
          pattern=".{4,50}"
          required
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked="">Description</ion-label>
        <ion-textarea
          name="formdescription"
          [(ngModel)]="formdescription"
          required
        ></ion-textarea>
      </ion-item>
      <ion-item>
        <ion-label>Language</ion-label>
        <ion-select
          name="formlangselect"
          [(ngModel)]="formlang"
          (ionChange)="formLangChange()"
          required
        >
          <ion-option *ngFor="let lang of languages" value="{{ lang.value }}">{{ lang.name }}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label>New Group</ion-label>
        <ion-checkbox
          name="formnewgroupcb"
          [(ngModel)]="groupNew"
          (click)="newGroupChange($event)"
        ></ion-checkbox>
      </ion-item>
      <ion-item>
        <ion-label stacked>Optional, minimum 4 letters, maximum 50 letters</ion-label>
        <ion-input
          type="text"
          name="newgroupname"
          [(ngModel)]="formnewgroupname"
          [disabled]="!groupNew"
          placeholder="New group name"
          pattern=".{4,50}"
        ></ion-input>
      </ion-item>
      <ion-item *ngIf="formOldGroupsInSelectedTag[0]">
        <ion-label>Old Group</ion-label>
        <ion-checkbox
          name="formoldgroupcb"
          [(ngModel)]="groupOld"
          (click)="oldGroupChange($event)"
        ></ion-checkbox>
      </ion-item>
      <ion-item *ngIf="formOldGroupsInSelectedTag[0]">
        <ion-label>Select:</ion-label>
        <ion-select
          name="formoldgroupselect"
          [disabled]="!groupOld"
          [(ngModel)]="oldGroupsSelectedId"
        >
          <ion-option
            *ngFor="let group of formOldGroupsInSelectedTag" value="{{ group.id }}"
          >
            {{ group.name }}
          </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <button ion-button (click)="submitNewMedia()">Upload</button>
      </ion-item>
    </ion-list>
  </form>
</ion-content>
